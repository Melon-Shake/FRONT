<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:width="http://xmlns.jcp.org/xml/ns/persistence/orm">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>멜론 쉐이크</title>


    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
    <style>
        .table-container {
            max-height: 730px;/* 테이블의 최대 높이 설정 */
            overflow-y: scroll; /* 세로 스크롤 적용 */
            overflow-x: hidden;
            border-radius: 20px;
        }

        .table-container::-webkit-scrollbar {
            width: 10px;
            height: 100%;
        }
        .table-container::-webkit-scrollbar-thumb {
            background-color: #00ffcc;
            border-radius: 10px;
            background-clip: padding-box;
            border: 2px solid transparent;
        }
        .table-container::-webkit-scrollbar-track {
            background-color: black;
            border-radius: 10px;
            box-shadow: inset 0px 0px 5px white;
        }
        th {
            position: sticky; /* 테이블 헤더를 고정 */
            top: 0;
            z-index: 1; /* 다른 내용 위에 표시 */
        }
        body {
            background: #1c1c1c;
            font-family: 'Nanum Gothic', sans-serif;
            font-weight: bold;
        }
        .btn-primary {
            --bs-btn-color: #fff;
            --bs-btn-bg: transparent;
            --bs-btn-border-color: #40a798;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #3a9688;
            --bs-btn-hover-border-color: #3a9688;
            --bs-btn-focus-shadow-rgb: 49, 132, 253;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: red;
            --bs-btn-active-border-color: #50d0bd;
            --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
            --bs-btn-disabled-color: #fff;
        }
        .btn-primary:hover{
            background: linear-gradient(to bottom, #40a798 0%, #009999 100%);
        }
        .btn-primary:active {
            background: linear-gradient(to bottom, #50d0bd 0%, #40a798 100%);
        }
        .tab-btn{
            --bs-btn-color: white;
            --bs-btn-bg: black;
            --bs-btn-focus-shadow-rgb: 49, 132, 253;
            --bs-btn-active-color: #50d0bd;
            --bs-btn-active-border-color: #50d0bd;
            --bs-btn-active-bg: transparent;
            --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
            --bs-btn-disabled-color: #fff;
            border-bottom: none;
        }
        .tab-btn{
            background: linear-gradient(to bottom,#393939 0%,#555555 100%);
        }
        .tab-btn:hover{
            background: linear-gradient(to bottom, #797979 0%, #555555 100%);
        }
        .tab-btn:active {
            background: linear-gradient(to bottom, #9c9c9c 0%, #797979 100%);
        }
        .chart-header{
            --bs-btn-color: white;
            --bs-btn-bg: black;
            --bs-btn-focus-shadow-rgb: 49, 132, 253;
            --bs-btn-active-color: #50d0bd;
            --bs-btn-active-border-color: #50d0bd;
            --bs-btn-active-bg: transparent;
            --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
            --bs-btn-disabled-color: #fff;
            border-bottom: none;
        }
        .chart-header{
            background: linear-gradient(to bottom,#393939 0%,#555555 100%);
        }
        .chart-header:hover{
            background: linear-gradient(to bottom, #797979 0%, #555555 100%);
        }
        .chart-header:active {
            background: linear-gradient(to bottom, #9c9c9c 0%, #797979 100%);
        }

        .table {
            width:400px;
        }
        .header_height {
            max-height: 50px;
        }
        .center_pos {
            text-align: center;
        }
        .start_pos {
            text-align: start;
        }
        .search_height{
            max-height: 40px;
        }
        .button_width{
            width: 100px;
        }
        .colored_margin {
            background-color: black;
        }
        .container {
            display: flex;
            flex-direction: column; /* 필요에 따라 row로 변경 가능 */
            width: 100%;
            height: 100vh;
        }
        .table{
            --bs-table-bg: transparent;
        }
        nav a {
            text-decoration: none;
            color: #40a798;
            margin-left:10px;
        }

        nav a:hover {
            color: #50d0bd;
            text-decoration: underline;

        }
        nav a:active {
            color: #00ffcc;
        }
        p{
            color: #50d0bd;
        }

        .border-bottom {
            border-bottom-color: #50d0bd !important;
        }

        td {
            white-space: nowrap; /* 줄바꿈 방지 */
            overflow: hidden;
            text-overflow: ellipsis; /* ...으로 처리 */
        }
        a {
            text-decoration: none;
            color: rgb(255,255,255,0.4);
            margin-left:10px;
        }

        a:hover {
            color: rgb(255,255,255,0.6);
            font-weight: bold;
        }
        a:active {
            color: rgb(255,255,255);
            font-weight: bolder;
        }
        .table-container tr:not(:first-child) {
            transition: transform 0.1s ease-in-out;
        }
        .table-container tr:not(:first-child):hover {
            transform: scale(1.1); /* 원하는 확대 비율로 조정 */
            background-color: rgb(255,255,255,0.3);
        }

    </style>
</head>
<body>

<nav class="d-flex navbar navbar-expand-xl bg-gradient bg-dark navbar-dark" style="height: 70px;">
    <div class="col center_pos justify-content-start">
        <a href="/Home">
            <img src="/logo/transparent4.png">
        </a>
    </div>
    <div class="col-6 search_pos justify-content-center">
        <form class="d-flex" action="/search" method="post">
            <label for="searchInput"></label>
            <input type="text" class="form-control search_height" placeholder="검색어를 입력하세요" id="searchInput" name="searchInput">
            <button class="ms-2 btn btn-primary button_width search_height"  type="submit" id="gotoSearch">검색</button>
        </form>
    </div>
    <div style="width:350px" class="center_pos center">
        <div th:if="${userName}">
            <p class="fw-bolder" style="margin-top: 3px; margin-bottom: 3px">어서오세요 <span th:text="${userName}"></span>님!</p>
            <a href="#" onClick="logout()" class="fw-bold" style="margin-top: 3px; margin-bottom: 3px">로그아웃</a>
        </div>
        <div style="margin-bottom: 5px" th:unless="${userName}">
            <a href="/login" class="fw-bold">로그인</a>
            <a href="/register" class="fw-bold">회원가입</a>
        </div>
    </div>
</nav>
<div class="row" style="background:linear-gradient(to bottom,#969696 0%, #1c1c1c 100%)">
    <div class="mb-4"></div>
    <a class="col-1 text-start" onclick="history.back()" style="margin-left:50px;font-size: 50px; cursor:pointer"><</a>
    <div class = col-9></div>
    <a class="col-1 text-end" onclick="history.forward()" style="font-size: 50px; cursor:pointer">></a>
</div>
<div class="container">
    <div class="row">
            <div style="width:420px;">
                <div class="btn-group" style="margin-left: 12px; margin-top: 20px; width: 398px; height: 39px; color: white; text-align: center">
                    <button class="btn chart-header fw-bold" style="border-bottom: 1px solid black; border-radius: 0.25rem 0.25rem 0 0">종합 차트</button>
                </div>
                <div class="container-lg table-container" style="width:420px; margin-top: 0!important; border-top-left-radius: 0; border-top-right-radius: 0">
                <table class="table">
                    <tr>
                        <th th:class="fixed-column-rank" th:text="랭킹" style="width: 50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        <th th:class="fixed-column-track" th:text="곡" style="width: 150px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        <th th:class="fixed-column-artist" th:text="가수" style=";width: 130px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        <th th:class="fixed-column-album" th:text="앨범" style="width: 64px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                    </tr>

                    <tr th:each="total,i : ${totalChart}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${total.trackId}]],[[${total.albumId}]])">
                        <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                        <td th:text="${total.trackName}" style="vertical-align: middle;max-width: 140px"></td>
                        <td th:text="${total.artistNames}" style="vertical-align: middle;max-width: 110px"></td>
                        <td><img th:src="${total.imgUrl}" style="width:64px;padding-right:20px"></td>
                    <script>


                    </script>
                    </tr>
                </table>
                </div>
            </div>
            <div style="width:420px;">
                <div class="btn-group" style="margin-left: 12px; margin-top: 20px; width: 399px">
                    <button class="btn tab-btn" type="button" id="btn_1" style="border-radius: 0.25rem 0 0 0">Melon</button>
                    <button class="btn tab-btn" type="button" id="btn_2">Genie</button>
                    <button class="btn tab-btn" type="button" id="btn_3">Bugs</button>
                    <button class="btn tab-btn" type="button" id="btn_4">Flo</button>
                    <button class="btn tab-btn" type="button" id="btn_5"style="border-radius: 0 0.25rem 0 0">Vibe</button>
                </div>
                <div class="container-lg table-container tab-table" id="table1" style="width:420px;border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table">
                        <tr>
                            <th th:class="fixed-column-rank" th:text="랭킹" style="width: 50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-track" th:text="곡" style="width: 150px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-artist" th:text="가수" style="width: 130px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-album" th:text="앨범" style="width: 64px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="melon,i : ${chartMelon}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${melon.trackId}]],[[${melon.albumId}]])">
                            <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                            <td th:text="${melon.trackName}" style="max-width: 140px; vertical-align: middle;"></td>
                            <td th:text="${melon.artistNames}" style="max-width: 110px; vertical-align: middle;"></td>
                            <td><img th:src="${melon.imgUrl}" style="width:64px; padding-right:20px"></td>
                        </tr>
                    </table>
                </div>
                <div class="container-lg table-container tab-table" id="table2" style="width:420px; border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table">
                        <tr>
                            <th th:class="fixed-column-rank" th:text="랭킹" style="width: 50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-track" th:text="곡" style="width: 150px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-artist" th:text="가수" style="width: 130px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-album" th:text="앨범" style="width: 64px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="genie,i : ${chartGenie}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${genie.trackId}]],[[${genie.albumId}]])">
                            <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                            <td th:text="${genie.trackName}" style="max-width: 140px; vertical-align: middle;"></td>
                            <td th:text="${genie.artistNames}" style="max-width: 110px; vertical-align: middle;"></td>
                            <td><img th:src="${genie.imgUrl}" style="width:64px;padding-right:20px"></td>
                        </tr>
                    </table>
                </div>
                <div class="container-lg table-container tab-table" id="table3" style="width:420px; border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table">
                        <tr>
                            <th th:class="fixed-column-rank" th:text="랭킹" style="width:50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-track" th:text="곡" style="width: 150px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-artist" th:text="가수" style="width: 130px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-album" th:text="앨범" style="width: 64px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="bugs,i : ${chartBugs}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${bugs.trackId}]],[[${bugs.albumId}]])">
                            <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                            <td th:text="${bugs.trackName}" style="max-width: 140px; vertical-align: middle;"></td>
                            <td th:text="${bugs.artistNames}" style="max-width: 110px; vertical-align: middle;"></td>
                            <td><img th:src="${bugs.imgUrl}" style="width:64px; padding-right:20px"></td>
                        </tr>
                    </table>
                </div>
                <div class="container-lg table-container tab-table" id="table4" style="width:420px; border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table">
                        <tr>
                            <th th:class="fixed-column-rank" th:text="랭킹" style="width:50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-track" th:text="곡" style="width: 150px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-artist" th:text="가수" style="width: 130px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-album" th:text="앨범" style="width: 64px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="flo,i : ${chartFlo}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${flo.trackId}]],[[${flo.albumId}]])">
                            <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                            <td th:text="${flo.trackName}" style="max-width: 140px; vertical-align: middle;"></td>
                            <td th:text="${flo.artistNames}" style="max-width: 110px; vertical-align: middle;"></td>
                            <td><img th:src="${flo.imgUrl}" style="width:64px; padding-right: 20px"></td>
                        </tr>
                    </table>
                </div>
                <div class="container-lg table-container tab-table" id="table5" style="width:420px;border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table">
                        <tr>
                            <th th:class="fixed-column-rank" th:text="랭킹" style="width: 50px; background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-track" th:text="곡" style="width: 150px;background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-artist" th:text="가수" style="width: 130px;background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:class="fixed-column-album" th:text="앨범" style="width: 64px;background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="vibe,i : ${chartVibe}" style="background: rgba(255,255,255,0.65); cursor:pointer;" th:onclick="searchTrack([[${vibe.trackId}]],[[${vibe.albumId}]])">
                            <td th:text="${i.index+1}" style="min-width:50px; vertical-align: middle;"></td>
                            <td th:text="${vibe.trackName}" style="max-width: 140px; vertical-align: middle;"></td>
                            <td th:text="${vibe.artistNames}" style="max-width: 110px; vertical-align: middle;"></td>
                            <td><img th:src="${vibe.imgUrl}"style="width:64px; padding-right:20px"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div style="width:250px; margin-left:100px" >
                <div class="btn-group" style="margin-left: 12px;margin-top: 20px; width: 228px; height: 39px; color: white; text-align: center">
                    <button class="btn chart-header fw-bold" style="border-bottom: 1px solid black; border-radius: 0.25rem 0.25rem 0 0;">검색어 순위</button>
                </div>
                    <div class="container-lg table-container" style="width:250px; margin-top: 0!important; border-top-left-radius: 0; border-top-right-radius: 0">
                    <table class="table" style="width:250px">
                        <tr>
                            <th th:text="랭킹" style="background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                            <th th:text="검색어" style="background: linear-gradient(to bottom,#555555 0%,#393939 100%); color: white"></th>
                        </tr>
                        <tr th:each="keyword : ${keyword_ranking_chart}" style="background: rgba(255,255,255,0.65)">
                            <td th:text="${keyword.key}"></td>
                            <td th:text="${keyword.value}"></td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // document.getElementById("gotoRegister").addEventListener("click", function() {
    //     window.location.href = "/register";
    // });
    // document.getElementById("gotoLogin").addEventListener("click", function() {
    //     window.location.href = "/login";
    // });
    function logout(){
        let f = document.createElement('form');
        f.setAttribute('method', 'post');
        f.setAttribute('action', '/logout');
        document.body.appendChild(f);
        f.submit();
    }


    // buttons.forEach(function (button) {
    //     if (button.classList.contains("active")) {
    //         button.style.borderStyle = "2px solid white";
    //         button.style.borderBottomStyle = "none";
    //     } else {
    //         button.style.border = "none";
    //         button.style.borderBottom = "2px solid white";
    //     }

    window.onload = function() {
        $(".tab-table").hide();
        $("#table1").show();
        $(".tab-btn").removeClass("active");
        $(".tab-btn").addClass("border-bottom");
        $("#btn_1").addClass("active");
        $("#btn_1").removeClass("border-bottom");
    }
    $(document).ready(function() {
        $("#btn_1").click(function() {
            $(".tab-table").hide(); // 모든 테이블 숨기기
            $("#table1").show(); // 선택한 테이블 표시
            $(".tab-btn").removeClass("active");
            $(".tab-btn").addClass("border-bottom");
            $("#btn_1").addClass("active");
            $("#btn_1").removeClass("border-bottom");
        })
        $("#btn_2").click(function() {
            $(".tab-table").hide();
            $("#table2").show();
            $(".tab-btn").removeClass("active");
            $(".tab-btn").addClass("border-bottom");
            $("#btn_2").addClass("active");
            $("#btn_2").removeClass("border-bottom");
        })
        $("#btn_3").click(function() {
            $(".tab-table").hide();
            $("#table3").show();
            $(".tab-btn").removeClass("active");
            $(".tab-btn").addClass("border-bottom");
            $("#btn_3").addClass("active");
            $("#btn_3").removeClass("border-bottom");
        })
        $("#btn_4").click(function() {
            $(".tab-table").hide();
            $("#table4").show();
            $(".tab-btn").removeClass("active");
            $(".tab-btn").addClass("border-bottom");
            $("#btn_4").addClass("active");
            $("#btn_4").removeClass("border-bottom");
        })
        $("#btn_5").click(function() {
            $(".tab-table").hide();
            $("#table5").show();
            $(".tab-btn").removeClass("active");
            $(".tab-btn").addClass("border-bottom");
            $("#btn_5").addClass("active");
            $("#btn_5").removeClass("border-bottom");
        })
    })
    function searchTrack(track_id, album_id) {
        // trackName을 인자로 받아 URL을 생성합니다.
        const url = `/search/track/${track_id}/${album_id}`;

        // window.location.href를 사용하여 URL로 이동합니다.
        window.location.href = url;
    }

</script>
</body>
</html>
